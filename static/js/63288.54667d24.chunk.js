"use strict";(self.webpackChunkforever_rwa=self.webpackChunkforever_rwa||[]).push([[63288,21299],{17749:(t,e,n)=>{async function s(t,e){return await t({method:"eth_sendRawTransaction",params:[e]})}n.d(e,{B:()=>s})},63288:(t,e,n)=>{n.d(e,{f:()=>I,sendEip712Transaction:()=>P,a:()=>v});var s=n(37131),i=n(77378),r=n(17749),a=n(72364),o=n(3340);function h(t){if(["string","number"].includes(typeof t)&&!Number.isInteger(Number(t)))throw new Error(`Expected value to be an integer to convert to a bigint, got ${t} of type ${typeof t}`);return t instanceof Uint8Array?BigInt((0,o.EY)(t)):BigInt(t)}var c=n(21299),u=n(46325),p=n(79002),g=n(77300),d=n(17143),y=n(99541);const f=32n*n(89492).Au;var l=n(21627);class m extends l.C{constructor(t){let{givenLength:e,maxBytecodeSize:n}=t;super(`Bytecode cannot be longer than ${n} bytes. Given length: ${e}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class b extends l.C{constructor(t){let{givenLengthInWords:e}=t;super(`Bytecode length in 32-byte words must be odd. Given length in words: ${e}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class w extends l.C{constructor(t){let{givenLength:e}=t;super(`The bytecode length in bytes must be divisible by 32. Given length: ${e}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}const x=50000n,B=t=>{const e=function(t){const{gas:e,nonce:n,to:i,from:r,value:a,maxFeePerGas:h,maxPriorityFeePerGas:c,paymaster:u,paymasterInput:p,gasPerPubdata:g,data:l,factoryDeps:B}=t;return{txType:113n,from:BigInt(r),to:i?BigInt(i):0n,gasLimit:e??0n,gasPerPubdataByteLimit:g??x,maxFeePerGas:h??0n,maxPriorityFeePerGas:c??0n,paymaster:u?BigInt(u):0n,nonce:n?BigInt(n):0n,value:a??0n,data:l||"0x0",factoryDeps:B?.map((t=>(0,o.nj)(function(t){const e=(0,s.ZJ)(t);if(e.length%32!==0)throw new w({givenLength:e.length});if(e.length>f)throw new m({givenLength:e.length,maxBytecodeSize:f});const n=(0,y.s)(e),i=(0,s.ZJ)(n),r=e.length/32;if(r%2===0)throw new b({givenLengthInWords:r});const a=(0,s.ZJ)(r),o=(0,d.eV)(a,{size:2}),h=new Uint8Array([1,0]);return i.set(h,0),i.set(o,2),i}(t))))??[],paymasterInput:p||"0x"}}(t);return{domain:{name:"zkSync",version:"2",chainId:t.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:e}};async function P(t){const{account:e,transaction:n}=t,s=await I(t),i=await v({account:e,eip712Transaction:s,chainId:n.chain.id}),o=(0,a.getRpcClient)(n);return{transactionHash:await(0,r.B)(o,i),chain:n.chain,client:n.client}}async function v(t){const{account:e,eip712Transaction:n,chainId:s}=t,r=B(n),a=await e.signTypedData({...r});return function(t){const{chainId:e,gas:n,nonce:s,to:r,from:a,value:h,maxFeePerGas:u,maxPriorityFeePerGas:p,customSignature:g,factoryDeps:d,paymaster:y,paymasterInput:f,gasPerPubdata:l,data:m}=t,b=[s?(0,o.nj)(s):"0x",p?(0,o.nj)(p):"0x",u?(0,o.nj)(u):"0x",n?(0,o.nj)(n):"0x",r??"0x",h?(0,o.nj)(h):"0x",m??"0x0",(0,o.nj)(e),(0,o.nj)(""),(0,o.nj)(""),(0,o.nj)(e),a??"0x",l?(0,o.nj)(l):(0,o.nj)(x),d??[],g??"0x",y&&f?[y,f]:[]];return(0,c.concatHex)(["0x71",(0,i.EQ)(b)])}({...n,chainId:s,customSignature:a})}async function I(t){const{account:e,transaction:n}=t;let[i,r,c,d,y,f,l]=await Promise.all([(0,p.encode)(n),(0,u.r)(n.to),(0,u.r)(n.value),(0,u.r)(n.gas),(0,u.r)(n.maxFeePerGas),(0,u.r)(n.maxPriorityFeePerGas),(0,u.r)(n.eip712)]),m=l?.gasPerPubdata;if(!d||!y||!f){const t=(0,a.getRpcClient)(n),u=await t({method:"zks_estimateFee",params:[{from:e.address,to:r,data:i,value:c?(0,o.cK)(c):void 0,gasPerPubdata:m,eip712Meta:{...l,gasPerPubdata:m?(0,o.nj)(m):(0,o.nj)(50000n),factoryDeps:l?.factoryDeps?.map((t=>Array.from((0,s.aT)(t))))},type:"0x71"}]});d=h(u.gas_limit);y=2n*h(u.max_fee_per_gas),f=h(u.max_priority_fee_per_gas)||1n,m=2n*h(u.gas_per_pubdata_limit)}return{...await(0,g.$)({transaction:{...n,gas:d,maxFeePerGas:y,maxPriorityFeePerGas:f},from:e.address}),...n.eip712,gasPerPubdata:m,from:e.address}}},21299:(t,e,n)=>{function s(t){return`0x${t.reduce(((t,e)=>t+e.replace("0x","")),"")}`}n.r(e),n.d(e,{concatHex:()=>s})},89492:(t,e,n)=>{n.d(e,{Ao:()=>r,Au:()=>s,EA:()=>i});const s=65535n,i=2n**96n-1n,r=2n**256n-1n},77378:(t,e,n)=>{n.d(e,{EQ:()=>o});var s=n(21627),i=n(30751),r=n(37131),a=n(84117);function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex";const n=h(t),s=(0,i.l)(new Uint8Array(n.length));return n.encode(s),"hex"===e?(0,a.My)(s.bytes):s.bytes}function h(t){return Array.isArray(t)?function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=c(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),1===n?s.pushUint8(e):2===n?s.pushUint16(e):3===n?s.pushUint24(e):s.pushUint32(e));for(const{encode:e}of t)e(s)}}}(t.map((t=>h(t)))):function(t){const e="string"===typeof t?(0,r.aT)(t):t,n=c(e.length),s=1===e.length&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length;return{length:s,encode(t){1===e.length&&e[0]<128?t.pushBytes(e):e.length<=55?(t.pushByte(128+e.length),t.pushBytes(e)):(t.pushByte(183+n),1===n?t.pushUint8(e.length):2===n?t.pushUint16(e.length):3===n?t.pushUint24(e.length):t.pushUint32(e.length),t.pushBytes(e))}}}(t)}function c(t){if(t<256)return 1;if(t<65536)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new s.C("Length is too large.")}},99541:(t,e,n)=>{n.d(e,{s:()=>f});var s=n(108),i=n(96706);const r=(t,e,n)=>t&e^t&n^e&n;class a extends i.Vw{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.O8)(this.buffer)}update(t){(0,s.t2)(this);const{view:e,buffer:n,blockLen:r}=this,a=(t=(0,i.ZJ)(t)).length;for(let s=0;s<a;){const o=Math.min(r-this.pos,a-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=(0,i.O8)(t);for(;r<=a-s;s+=r)this.process(e,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,s.t2)(this),(0,s.CG)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:a}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let s=o;s<r;s++)e[s]=0;!function(t,e,n,s){if("function"===typeof t.setBigUint64)return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),a=Number(n>>i&r),o=Number(n&r),h=s?4:0,c=s?0:4;t.setUint32(e+h,a,s),t.setUint32(e+c,o,s)}(n,r-8,BigInt(8*this.length),a),this.process(n,0);const h=(0,i.O8)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,p=this.get();if(u>p.length)throw new Error("_sha2: outputLen bigger than state");for(let s=0;s<u;s++)h.setUint32(4*s,p[s],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:r,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=r,s%e&&t.buffer.set(n),t}}const o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),h=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends a{constructor(){super(64,32,8,!1),this.A=0|h[0],this.B=0|h[1],this.C=0|h[2],this.D=0|h[3],this.E=0|h[4],this.F=0|h[5],this.G=0|h[6],this.H=0|h[7]}get(){const{A:t,B:e,C:n,D:s,E:i,F:r,G:a,H:o}=this;return[t,e,n,s,i,r,a,o]}set(t,e,n,s,i,r,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|s,this.E=0|i,this.F=0|r,this.G=0|a,this.H=0|o}process(t,e){for(let i=0;i<16;i++,e+=4)c[i]=t.getUint32(e,!1);for(let r=16;r<64;r++){const t=c[r-15],e=c[r-2],n=(0,i.Ow)(t,7)^(0,i.Ow)(t,18)^t>>>3,s=(0,i.Ow)(e,17)^(0,i.Ow)(e,19)^e>>>10;c[r]=s+c[r-7]+n+c[r-16]|0}let{A:n,B:s,C:a,D:h,E:u,F:p,G:g,H:d}=this;for(let f=0;f<64;f++){const t=d+((0,i.Ow)(u,6)^(0,i.Ow)(u,11)^(0,i.Ow)(u,25))+((y=u)&p^~y&g)+o[f]+c[f]|0,e=((0,i.Ow)(n,2)^(0,i.Ow)(n,13)^(0,i.Ow)(n,22))+r(n,s,a)|0;d=g,g=p,p=u,u=h+t|0,h=a,a=s,s=n,n=t+e|0}var y;n=n+this.A|0,s=s+this.B|0,a=a+this.C|0,h=h+this.D|0,u=u+this.E|0,p=p+this.F|0,g=g+this.G|0,d=d+this.H|0,this.set(n,s,a,h,u,p,g,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const p=(0,i.ld)((()=>new u));var g=n(31499),d=n(37131),y=n(84117);function f(t,e){const n=e||"hex",s=p((0,g.q)(t,{strict:!1})?(0,d.ZJ)(t):t);return"bytes"===n?s:(0,y.nj)(s)}}}]);
//# sourceMappingURL=63288.54667d24.chunk.js.map